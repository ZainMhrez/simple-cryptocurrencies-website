import{j as r,F as p,a,r as u,L as h,b as f}from"./index.435b96df.js";import{u as N}from"./useInfiniteQuery.esm.1d65ac53.js";const n=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),_=({coinData:e})=>{var t,c;return r(p,{children:a("article",{className:"flex flex-col bg-slate-900 p-8 rounded-xl text-slate-200 shadow-xl shadow-slate-800",children:[a("div",{className:"flex justify-between items-center pb-4 border-b-2 border-slate-400",children:[a("h2",{className:"text-xl font-semibold",children:[e.market_cap_rank,". ",e.name]}),r("img",{src:e.image,alt:e.name,className:"w-8 h-8 aspect-3/2 object-cover"})]}),a("ul",{className:"pt-4",children:[a("li",{className:"",children:["Symbol: ",e.symbol.toUpperCase()]}),a("li",{className:"pt-4",children:["Price: ",n(e.current_price)," $"]}),a("li",{className:"pt-4",children:["Market Cap: ",n(e.market_cap)," $"]}),e.price_change_24h>=0?a("li",{className:"pt-4 text-green-500",children:["Price Change 24h: ",(t=e.price_change_24h)==null?void 0:t.toFixed(2)," $"]}):a("li",{className:"pt-4 text-red-500",children:["Price Change 24h: ",(c=e.price_change_24h)==null?void 0:c.toFixed(2)," $"]}),a("li",{className:"pt-4 text-green-500",children:["ATH: ",n(e.ath)," $"]})]})]})})},y=()=>{const[e,t]=u.exports.useState(1),c=async({pageParam:s=1})=>(await f.get(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=21&sparkline=false&price_change_percentage=24h&page=${s}`)).data,{data:l,error:g,status:d,isFetching:b,hasNextPage:o,fetchNextPage:x,isFetchingNextPage:m}=N(["infinite"],c,{getNextPageParam:s=>s,refetchOnWindowFocus:!1});return d==="loading"?r(h,{}):d==="error"?a("p",{children:["Error: ",g.message]}):a(p,{children:[r("div",{className:"grid grid-cols-auto-fill gap-5",children:l==null?void 0:l.pages.map(s=>s.map(i=>r(_,{coinData:i},i.id)))}),r("div",{className:"flex justify-center items-center mt-10",children:r("button",{onClick:()=>{x({pageParam:e+1}),t(e+1)},disabled:!o||m,children:m?r(h,{}):o?r("span",{className:"bg-slate-900 text-slate-100 font-medium p-4 rounded-2xl hover:opacity-80",children:"Load More"}):"Nothing more to load"})})]})};export{y as default};
